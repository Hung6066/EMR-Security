<div class="container">
  <h1>Application Health & Supply Chain Security</h1>

  <div class="grid-layout">
    <!-- Code Attestation Card -->
    <mat-card>
      <mat-card-header>
        <mat-card-title>Code Integrity Attestation</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="loadingAttestation" class="loading-spinner"><mat-spinner></mat-spinner></div>
        <div *ngIf="attestationResult" class="status-box" [class.valid]="attestationResult.isValid" [class.invalid]="!attestationResult.isValid">
          <mat-icon>{{ attestationResult.isValid ? 'verified_user' : 'gpp_bad' }}</mat-icon>
          <span>{{ attestationResult.isValid ? 'Application Integrity Verified' : 'Integrity Check Failed!' }}</span>
        </div>
        <div *ngIf="attestationResult && !attestationResult.isValid">
          <h4>Mismatched / Tampered Files:</h4>
          <ul><li *ngFor="let file of attestationResult.mismatchedFiles"><code>{{ file }}</code></li></ul>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Dependency Vulnerability Card -->
    <mat-card>
      <mat-card-header><mat-card-title>Dependency Vulnerabilities (SBOM)</mat-card-title></mat-card-header>
      <mat-card-content>
        <div *ngIf="loadingDeps" class="loading-spinner"><mat-spinner></mat-spinner></div>
        <div *ngIf="!loadingDeps && dependenciesResult.length === 0" class="status-box valid">
          <mat-icon>check_circle</mat-icon>
          <span>No known vulnerabilities in dependencies.</span>
        </div>
        <div *ngIf="dependenciesResult.length > 0">
          <!-- Bảng hiển thị các lỗ hổng trong thư viện -->
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>